@inject IVialSetHandler vialSetHandler

@code {
    public IEnumerable<VialView> vialViews;

    private VialSet set;
    public VialSet Set
    {
        get
        {
            return set;
        }
        set
        {
            set = value;
            StateHasChanged();
        }
    }
}

@functions {
}

@if (Set != null)
{
    <div class="marks">
        @foreach (var vial in Set.Vials)
        {
            if (vial.IsSelected)
            {
                <div class="indicator selected-indicator"></div>
            }
            else if (vial.IsOption)
            {
                <div class="indicator option-indicator"></div>
            }
            else
            {
                <div class="indicator"></div>
            }
        }
    </div>

    <div class="clear"></div>

    var i = 0;

    <div class="vial-set">
        @foreach (var vial in Set.Vials)
        {
            <VialView Vial="@vial" VialIndex="@i" ClickHandler="@(new VialClickedHandler(this, set, vialSetHandler))" />

            i++;
        }
    </div>
    <div class="clear"></div>
}
